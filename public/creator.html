<!DOCTYPE html>
<html lang="ko">
  <head>
    <script src="/env.js"></script>
    <meta charset="UTF-8" />
    <title>크리에이터 프로필 | 크라마(crama)</title>
    <meta
      name="description"
      content="크라마(crama) 크리에이터의 프로필과 캐릭터·이미지 작품을 한눈에 확인하세요."
    />
    <meta property="og:title" content="크리에이터 프로필 | 크라마(crama)" />
    <meta
      property="og:description"
      content="팔로우하고 작품을 감상하며 영감을 얻을 수 있는 공유 공간입니다."
    />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://crama.app/creator" />
    <meta property="og:site_name" content="크라마(crama)" />
    <meta
      property="og:image"
      content="https://crama.app/assets/og-default.png"
    />
    <meta property="og:locale" content="ko_KR" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="크리에이터 프로필 | 크라마(crama)" />
    <meta
      name="twitter:description"
      content="팔로우하고 작품을 감상하며 영감을 얻을 수 있는 공유 공간입니다."
    />
    <meta
      name="twitter:image"
      content="https://crama.app/assets/og-default.png"
    />
    <link rel="canonical" href="https://crama.app/creator" />
    <link rel="stylesheet" href="./css/url-bar.css" />
    <link rel="stylesheet" href="./css/common.css" />
    <link rel="stylesheet" href="./css/creator.css" />
    <link rel="stylesheet" href="./css/character-detail-modal.css" />
  </head>
  <body data-page="creator">
    <div class="app">
      <header class="top-bar">
        <div class="top-bar-left">
          <button class="back-btn" id="mobileNavBtn" aria-label="메뉴 열기">
            ☰
          </button>
          <span class="top-title">크리에이터 프로필</span>
        </div>
      </header>

      <div class="content">
        <div id="sidebar-container"></div>
        <div id="drawer-container"></div>

        <main class="main-area creator-main">
          <section class="creator-hero" id="creatorHero">
            <div class="creator-avatar" id="creatorAvatar" aria-hidden="true">
              ?
            </div>
            <div class="creator-meta">
              <div class="creator-handle-row">
                <div class="creator-name" id="creatorName">-</div>
                <span class="creator-handle" id="creatorHandle">@-</span>
                <span class="creator-badge" id="creatorBadge">CREATOR</span>
              </div>
              <div class="creator-links">
                <a
                  href="#"
                  target="_blank"
                  rel="noopener"
                  id="creatorWebsite"
                  class="creator-link"
                  hidden
                  >웹사이트</a
                >
              </div>
              <!-- <dl class="creator-info-list">
              <div>
                <dt>직업</dt>
                <dd id="creatorJob">-</dd>
              </div>
              <div>
                <dt>성별</dt>
                <dd id="creatorGender">-</dd>
              </div>
              <div>
                <dt>연령대</dt>
                <dd id="creatorAge">-</dd>
              </div>
            </dl> -->

              <div class="creator-stats" id="creatorStats">
                <span
                  >대표 캐릭터
                  <strong id="creatorCharacterCount">0</strong></span
                >
                <span
                  >총 캐릭터
                  <strong id="creatorTotalCharacters">0</strong></span
                >
                <span>총 대화 <strong id="creatorTotalChats">0</strong></span>
                <span data-follow-target="followers"
                  >팔로워 <strong id="creatorFollowers">0</strong></span
                >
                <span data-follow-target="followings"
                  >팔로잉 <strong id="creatorFollowings">0</strong></span
                >
              </div>
              <div class="creator-bio-block" id="creatorBioBlock">
                <p class="creator-bio" id="creatorBio">
                  소개 문구가 여기에 표시됩니다.
                </p>
                <button
                  type="button"
                  class="creator-bio-toggle hidden"
                  id="creatorBioToggle"
                >
                  더보기
                </button>
              </div>

              <div class="creator-actions">
                <button class="btn btn-accent" id="followBtn">팔로우</button>
                <button class="btn btn-ghost" id="shareBtn">공유</button>
              </div>
            </div>
          </section>

          <section class="creator-follow-list hidden" id="creatorFollowList">
            <div class="follow-modal">
              <button
                type="button"
                class="follow-modal__close"
                id="closeFollowModal"
                aria-label="닫기"
              >
                ×
              </button>
              <div class="creator-section-head">
                <h2 class="creator-section-title" id="followListTitle">
                  팔로워
                </h2>
              </div>
              <div class="follow-tabs">
                <button
                  type="button"
                  class="follow-tab"
                  data-follow-tab="followers"
                >
                  팔로워
                </button>
                <button
                  type="button"
                  class="follow-tab"
                  data-follow-tab="followings"
                >
                  팔로잉
                </button>
              </div>
              <div class="follow-modal__body">
                <div class="follow-list" id="followListBody"></div>
                <p class="follow-empty" id="followListEmpty">
                  목록이 없습니다.
                </p>
              </div>
            </div>
          </section>

          <!-- <section class="creator-characters" id="creatorCharactersSection">
          <div class="creator-section-head">
            <h2 class="creator-section-title">대표 캐릭터</h2>
            <p class="creator-section-sub">최근 대화를 기반으로 자동으로 채워집니다.</p>
          </div>
          <div class="creator-character-list" id="creatorCharacterList"></div>
        </section> -->

          <section class="creator-works" id="creatorWorksSection">
            <div class="creator-section-head">
              <h2 class="creator-section-title">작가 아카이브</h2>
              <div class="creator-tabs" id="creatorWorkTabs" role="tablist">
                <button
                  class="creator-tab active"
                  data-work-tab="characters"
                  role="tab"
                  aria-selected="true"
                >
                  캐릭터
                </button>
                <button
                  class="creator-tab"
                  data-work-tab="feed"
                  role="tab"
                  aria-selected="false"
                >
                  피드
                </button>
              </div>
            </div>
            <section class="creator-grid" id="creatorGrid"></section>
            <div class="creator-empty hidden" id="creatorEmpty">
              아직 등록된 캐릭터가 없어요. 캐릭터챗을 시작해보세요.
            </div>

            <div class="creator-feed hidden" id="creatorFeedBlock">
              <div
                class="feed-compose-launcher hidden"
                id="feedComposeLauncher"
              >
                <button
                  type="button"
                  class="feed-compose-btn"
                  id="openFeedComposer"
                >
                  피드 작성하기
                </button>
                <p class="feed-compose-hint">
                  마크다운과 이미지 URL을 지원해요.
                </p>
              </div>
              <div class="creator-feed-list" id="feedList"></div>
              <div class="creator-empty hidden" id="feedEmpty">
                아직 작성된 피드가 없습니다.
              </div>
              <button
                type="button"
                class="feed-load-more hidden"
                id="feedLoadMore"
              >
                더 보기
              </button>
            </div>
          </section>
        </main>
      </div>
    </div>

    <div class="creator-share-dim hidden" id="creatorShareDim"></div>
    <div
      class="creator-share-sheet hidden"
      id="creatorShareSheet"
      role="dialog"
      aria-modal="true"
    >
      <div class="creator-share-card">
        <h3>크리에이터 공유</h3>
        <p>링크를 복사하거나 기기 공유 기능을 사용하세요.</p>
        <div class="creator-share-link">
          <input type="text" id="creatorShareLink" readonly />
          <button type="button" id="creatorShareCopy">복사</button>
        </div>
        <div class="creator-share-actions">
          <button class="btn btn-accent" type="button" id="creatorShareSystem">
            기기 공유
          </button>
          <button class="btn btn-ghost" type="button" id="creatorShareClose">
            닫기
          </button>
        </div>
      </div>
    </div>

    <div
      class="creator-feed-detail hidden"
      id="feedDetailSheet"
      role="dialog"
      aria-modal="true"
    >
      <div class="feed-detail-card">
        <button
          class="feed-detail-close"
          id="feedDetailClose"
          aria-label="닫기"
        >
          ×
        </button>
        <div class="feed-detail-content">
          <div class="feed-detail-meta">
            <span class="feed-detail-type" id="feedDetailType"></span>
            <span class="feed-detail-date" id="feedDetailDate"></span>
          </div>
          <div class="feed-detail-body" id="feedDetailBody"></div>
          <div class="feed-detail-image hidden" id="feedDetailImage"></div>
          <div class="feed-detail-actions">
            <button
              type="button"
              class="feed-detail-like"
              id="feedDetailLikeBtn"
            ></button>
            <button
              type="button"
              class="feed-detail-edit hidden"
              id="feedDetailEditBtn"
            >
              수정
            </button>
            <button
              type="button"
              class="feed-detail-delete hidden"
              id="feedDetailDeleteBtn"
            >
              삭제
            </button>
          </div>
        </div>
        <div class="feed-comments" id="feedComments"></div>
        <form class="feed-comment-form hidden" id="feedCommentForm">
          <textarea
            id="feedCommentInput"
            rows="2"
            placeholder="댓글을 입력하세요."
          ></textarea>
          <div class="feed-comment-actions">
            <button type="submit" class="btn btn-accent">댓글 등록</button>
          </div>
          <p class="feed-comment-status" id="feedCommentStatus"></p>
        </form>
      </div>
    </div>

    <div
      class="feed-composer-layer hidden"
      id="feedComposerLayer"
      role="dialog"
      aria-modal="true"
    >
      <div class="feed-composer-backdrop" id="feedComposerBackdrop"></div>
      <div class="feed-composer-card">
        <header class="feed-composer-header">
          <h3>글쓰기</h3>
          <button
            type="button"
            class="feed-composer-close"
            id="feedComposerClose"
            aria-label="닫기"
          >
            ×
          </button>
        </header>
        <form id="feedComposerForm">
          <label for="feedComposerInput">내용</label>
          <textarea
            id="feedComposerInput"
            rows="6"
            maxlength="2000"
            placeholder="피드에 올라갈 내용을 작성해주세요. 마크다운을 사용할 수 있어요."
          ></textarea>
          <div class="feed-composer-counter">
            <span id="feedComposerCounter">0</span> / 2000
          </div>
          <label for="feedComposerImageInput">이미지 URL (선택)</label>
          <input
            type="url"
            id="feedComposerImageInput"
            placeholder="https://이미지를 첨부하려면 주소를 붙여넣으세요."
          />
          <p class="feed-composer-status" id="feedComposerStatus"></p>
          <div class="feed-composer-actions">
            <button type="button" class="btn btn-ghost" id="feedComposerCancel">
              취소
            </button>
            <button type="submit" class="btn btn-accent">게시</button>
          </div>
        </form>
      </div>
    </div>

    <div
      class="creator-profile-edit hidden"
      id="creatorProfileEditLayer"
      role="dialog"
      aria-modal="true"
    >
      <div
        class="creator-profile-edit-backdrop"
        id="creatorProfileEditBackdrop"
      ></div>
      <div class="creator-profile-edit-card">
        <header class="creator-profile-edit-header">
          <h3>프로필 수정</h3>
          <button
            type="button"
            class="creator-profile-edit-close"
            id="creatorProfileEditClose"
            aria-label="닫기"
          >
            ×
          </button>
        </header>
        <form id="creatorProfileForm">
          <fieldset class="creator-profile-field creator-profile-avatar-field">
            <legend>아바타 이미지</legend>
            <div
              class="creator-profile-avatar-picker"
              id="creatorProfileAvatarPreview"
              role="button"
              tabindex="0"
              aria-label="아바타 업로드"
            >
              <span class="creator-profile-avatar-placeholder">+</span>
            </div>
            <span class="creator-profile-hint"
              >아이콘을 눌러 프로필 이미지를 업로드하세요.</span
            >
            <span
              class="creator-profile-hint"
              id="creatorProfileAvatarUploadStatus"
            ></span>
            <input
              type="file"
              id="creatorProfileAvatarFile"
              accept="image/*"
              class="hidden-input"
            />
          </fieldset>
          <label class="creator-profile-field">
            <span>닉네임</span>
            <input
              type="text"
              id="creatorProfileNameInput"
              maxlength="32"
              placeholder="닉네임을 입력하세요."
            />
          </label>
          <label class="creator-profile-field">
            <span>자기소개</span>
            <textarea
              id="creatorProfileBioInput"
              rows="4"
              maxlength="2000"
              placeholder="간단한 자기소개를 작성해주세요."
            ></textarea>
          </label>
          <p
            class="creator-profile-edit-status"
            id="creatorProfileEditStatus"
          ></p>
          <div class="creator-profile-edit-actions">
            <button
              type="button"
              class="btn btn-ghost"
              id="creatorProfileEditCancel"
            >
              취소
            </button>
            <button
              type="submit"
              class="btn btn-accent"
              id="creatorProfileEditSubmit"
            >
              저장
            </button>
          </div>
        </form>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="js/common.js"></script>
    <script src="js/characterDetailModal.js"></script>
    <script src="js/creator.js"></script>
  </body>
</html>
