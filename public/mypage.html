<!DOCTYPE html>
<html lang="ko">
<head>
    <script src="/env.js"></script>
  <meta charset="UTF-8" />
  <title>마이페이지 | 크라마(crama)</title>
  <meta name="description" content="크라마(crama) 마이페이지에서 크레딧, 구독 상태, 최근 생성물을 관리하세요.">
  <meta property="og:title" content="마이페이지 | 크라마(crama)">
  <meta property="og:description" content="프로필 정보를 수정하고 크레딧 잔액과 사용 내역을 한 번에 확인하세요.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://crama.app/mypage">
  <meta property="og:site_name" content="크라마(crama)">
  <meta property="og:image" content="https://crama.app/assets/og-default.png">
  <meta property="og:locale" content="ko_KR">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="마이페이지 | 크라마(crama)">
  <meta name="twitter:description" content="프로필 정보를 수정하고 크레딧 잔액과 사용 내역을 한 번에 확인하세요.">
  <meta name="twitter:image" content="https://crama.app/assets/og-default.png">
  <link rel="canonical" href="https://crama.app/mypage">
  <link rel="stylesheet" href="./css/url-bar.css" />
  <link rel="stylesheet" href="./css/common.css" />
  <link rel="stylesheet" href="./css/mypage.css" />
</head>

<body data-page="mypage">
  <div class="app">
    <!-- 상단 헤더 -->
    <header class="top-bar">
      <div class="top-bar-left">
        <button class="back-btn" id="mobileNavBtn" aria-label="메뉴 열기">
          ☰
        </button>
        <span class="top-title">마이페이지</span>
      </div>
    </header>

    <div class="content">
      <!-- 좌측 사이드바 -->
      <div id="sidebar-container"></div>

      <!-- 전역 드로어 -->
      <div id="drawer-container"></div>

      <!-- 메인 -->
      <main class="main-area mypage-main">
        <section class="profile-card" id="profileCard">
          <button type="button" class="profile-header profile-header-link" id="mypageCreatorLink" aria-label="내 크리에이터 페이지로 이동">
            <div class="profile-header-main">
              <div class="profile-avatar" id="profileAvatarCircle">프로필</div>
              <div class="profile-name-wrap">
                <div class="profile-display-name" id="profileDisplayName">회원명</div>
                <div class="profile-handle" id="profileHandle">@username</div>
              </div>
            </div>
            <span class="profile-header-arrow" aria-hidden="true">›</span>
          </button>

          <div class="profile-insights">
            <div class="profile-insight">
              <span class="profile-insight__label">닉네임</span>
              <strong class="profile-insight__value" id="profileNickname">-</strong>
            </div>
            <div class="profile-insight">
              <span class="profile-insight__label">가입일</span>
              <strong class="profile-insight__value" id="profileJoinedAt">-</strong>
            </div>
            <div class="profile-insight">
              <span class="profile-insight__label">현재 플랜</span>
              <strong class="profile-insight__value" id="profilePlan">무료</strong>
            </div>
          </div>

          <div class="profile-actions">
            <button class="profile-logout-btn" id="profileLogoutBtn">
              로그아웃
            </button>
          </div>
        </section>

        <section class="scene-card card" id="sceneSummaryCard">
          <div class="scene-card__header">
            <div>
              <p class="scene-card__eyebrow">scene & 혜택</p>
              <h3 class="scene-card__title">오늘 Scene 현황</h3>
            </div>
            <div class="scene-card__plan" id="scenePlanLabel">무료</div>
          </div>
          <div class="scene-card__balance">
            <div class="scene-card__balance-value" data-profile-credits>0</div>
            <div class="scene-card__balance-label">잔여 scene</div>
            <button class="scene-card__balance-btn" id="buyCreditsBtn">
              scene 충전하기
            </button>
          </div>
          <div class="daily-welcome-card" id="dailyWelcomeCard">
            <div class="daily-welcome-texts">
              <div class="daily-welcome-title">
                매일 웰컴 scene
                <span class="daily-welcome-amount" id="dailyWelcomeAmount"></span>
              </div>
              <div class="daily-welcome-status" id="dailyWelcomeStatus">
                상태 확인 중...
              </div>
            </div>
            <button class="daily-welcome-btn" id="dailyWelcomeBtn">
              받기
            </button>
          </div>
          <p class="daily-welcome-hint" id="dailyWelcomeHint"></p>
        </section>
      </main>
    </div>
  </div>

  <!-- Supabase + 공통 스크립트 -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="js/common.js"></script>
  <script src="js/authWidget.js"></script>
  <script src="js/mypage.js"></script>
</body>
</html>
