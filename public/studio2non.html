<!DOCTYPE html>
<html lang="ko">

<head>
    <script src="/env.js"></script>
  <meta charset="UTF-8" />
  <meta name="description" content="크라마(crama) 클래식 스튜디오에서 템플릿과 키워드 기반으로 캐릭터 이미지를 구상하세요.">
  <meta property="og:title" content="크라마(crama) 스튜디오 (클래식)">
  <meta property="og:description" content="레퍼런스를 탐색하고 선택한 스타일로 이미지를 생성할 수 있는 실험용 인터페이스.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://crama.app/studio2non">
  <meta property="og:site_name" content="크라마(crama)">
  <meta property="og:image" content="https://crama.app/assets/og-default.png">
  <meta property="og:locale" content="ko_KR">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="크라마(crama) 스튜디오 (클래식)">
  <meta name="twitter:description" content="레퍼런스를 탐색하고 선택한 스타일로 이미지를 생성할 수 있는 실험용 인터페이스.">
  <meta name="twitter:image" content="https://crama.app/assets/og-default.png">
  <link rel="canonical" href="https://crama.app/studio2non">
  <link rel="stylesheet" href="./css/common.css">
  <link rel="stylesheet" href="./css/studio.css">
  <title>크라마(crama)! 스튜디오</title>
</head>

<body data-page="studio">
  <div class="app">
    <!-- 상단 헤더 -->
    <header class="top-bar">
      <div class="top-bar-left">
        <button class="back-btn" id="mobileNavBtn" aria-label="메뉴 열기">
          ☰
        </button>
        <span class="top-title">스튜디오</span>
        <span class="top-add">+</span>
      </div>
    </header>

    <div class="content">
      <!-- 좌측 사이드바 -->
      <div id="sidebar-container"></div>

      <!-- 🔹 전역 드로어 -->
      <div id="drawer-container"></div>

      <!-- 메인 -->
      <main class="main-area">
        <div class="studio-wrapper">
          <!-- 상단 타이틀 -->
          <section class="studio-header">
            <div class="studio-title-box">
              <div class="studio-title">크라마(crama) 스튜디오</div>
              <div class="studio-subtitle">
                텍스트 프롬프트와 키워드를 기반으로 레퍼런스를 먼저 탐색하고,
                선택한 레퍼런스로 이미지를 생성해보세요. (바로 생성도 가능)
              </div>
            </div>
          </section>

          <!-- 본문: 위쪽 보드 영역 + 아래 입력 바 -->
          <section class="studio-main" id="studioMain" data-layout="ref-only">
            <!-- 🔹 위쪽: 레퍼런스 / 생성 결과 보드 영역 -->
            <div class="studio-boards">
              <!-- 왼쪽: 레퍼런스 보드 -->
              <div class="board board-ref">
                <!-- 선택된 레퍼런스 썸네일 바 -->
                <div class="selected-ref-bar" id="selectedRefBar">
                  <span class="selected-ref-empty">
                    선택된 레퍼런스가 없습니다. 이미지를 클릭해서 선택해보세요.
                  </span>
                </div>

                <!-- 기존 레퍼런스 섹션 -->
                <div class="section-card">
                  <div class="section-header">
                    <div class="section-title-box">
                      <div class="section-title">레퍼런스 결과</div>
                      <div class="section-sub">
                        프롬프트/키워드를 바탕으로 찾아온 이미지 레퍼런스예요.
                        최대 8개까지 선택 가능합니다.
                      </div>
                    </div>
                    <div class="badge-outline" id="refCountBadge">
                      <span class="badge-dot"></span>
                      선택된 레퍼런스 0개
                    </div>
                  </div>

                  <div id="refEmpty" class="empty-state">
                    아직 레퍼런스가 없어요. 아래에서 프롬프트를 입력하고
                    <strong>“레퍼런스 검색”</strong>을 눌러주세요.
                  </div>

                  <div class="ref-grid" id="refGrid" hidden></div>
                </div>
              </div>

              <!-- 오른쪽: 생성 이미지 보드 -->
              <div class="board board-gen">
                <div class="section-card">
                  <div class="section-header">
                    <div class="section-title-box">
                      <div class="section-title">생성된 이미지</div>
                      <div class="section-sub">
                        선택한 레퍼런스 또는 프롬프트만으로 생성된 결과입니다.
                      </div>
                    </div>
                    <button type="button" class="btn btn-primary" id="generateFromRefBtn">
                      <span class="btn-icon">⚡</span>
                      선택 레퍼런스로 생성
                    </button>
                  </div>

                  <div id="genEmpty" class="empty-state">
                    생성된 이미지가 없습니다. 레퍼런스를 선택해서
                    <strong>“선택 레퍼런스로 생성”</strong>하거나, 아래에서
                    <strong>“프롬프트로 바로 생성”</strong>을 눌러보세요.
                  </div>

                  <div class="gen-grid" id="genGrid" hidden></div>
                </div>
              </div>
            </div>

            <!-- 🔹 아래: 채팅처럼 하단 입력 바 -->
            <div class="studio-input-bar">
              <div class="input-row">
                <div class="input-main">
                  <label class="field-label" for="promptInput">텍스트 프롬프트</label>
                  <textarea id="promptInput" class="textarea input-textarea"
                    placeholder="예) 노을이 지는 바다 위를 날아가는 작은 종이비행기, 파스텔 톤, 감성적인 일러스트"></textarea>
                </div>
              </div>

              <div class="input-row input-row-bottom">
                <div class="input-left">
                  <div class="field-group">
                    <label class="field-label" for="keywordInput">키워드 (쉼표로 구분)</label>
                    <input id="keywordInput" class="input"
                      placeholder="예) pastel, sunset, minimal, illustration" />
                  </div>
                  <div class="chips" id="chipList">
                    <button type="button" class="chip">portrait</button>
                    <button type="button" class="chip">cinematic</button>
                    <button type="button" class="chip">3d render</button>
                    <button type="button" class="chip">flat illustration</button>
                    <button type="button" class="chip">vivid color</button>
                  </div>
                </div>

                <div class="input-right">
                  <div class="segment-wrap">
                    <button type="button" class="segment-btn active" data-mode="reference" id="modeReferenceBtn">
                      <span class="segment-dot"></span>
                      레퍼런스 먼저 보기
                    </button>
                    <button type="button" class="segment-btn" data-mode="direct" id="modeDirectBtn">
                      바로 생성
                    </button>
                  </div>

                  <div class="input-actions">
                    <button type="button" class="btn btn-outline" id="searchRefBtn">
                      <span class="btn-icon">🔍</span>
                      레퍼런스 검색
                    </button>

                    <button type="button" class="btn btn-primary" id="directGenerateBtn">
                      <span class="btn-icon">✨</span>
                      프롬프트로 바로 생성
                    </button>
                  </div>

                  <div class="hint-text">
                    * 원하는 프롬프트와 키워드를 입력한 뒤, 우측 버튼으로 레퍼런스를 보거나 바로 이미지를 생성할 수 있어요.
                  </div>
                </div>
              </div>
            </div>
          </section>
        </div>
      </main>
    </div>
  </div>

  <!-- Supabase CDN -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

  <!-- 전역 supabase 클라이언트 생성 -->
  <script src="js/common.js"></script>

  <!-- 로그인 위젯 (authArea 관리) -->
  <script src="js/authWidget.js"></script>
  <script src="js/studio.js"></script>

  <!-- 이미지 확대 모달 -->
  <div id="imageModal" class="image-modal hidden">
    <div class="image-modal-inner">
      <button id="imageModalClose" class="image-modal-close">✕</button>
      <img id="imageModalImg" src="" alt="미리보기 이미지" />
    </div>
  </div>
</body>

</html>
